<f:view xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui" xmlns:f="http://java.sun.com/jsf/core"
        xmlns:portlet="http://java.sun.com/portlet_2_0">


  <p:panel styleClass="filter-root" id="add-ifeed-filters" rendered="#{app.inEditMode}">
    <h3>LÃ¤gg till nytt filter</h3>

    <table class="ifeed-filters">
      <ui:repeat value="#{app.getFilters()}" var="ifeedFilter" varStatus="status">
        <tr>
          <td colspan="2">
            <p:commandLink styleClassFoo="main-item ltr-flowing-item"
                           value="#{ifeedFilter.name} #{ifeedFilter.expanded ? '(-)': '(+)'}"
                           update=":ifeed_view"
                           ajax="true"
                           async="true"
                           title="#{ifeedFilter.help}"
                           actionListener="#{ifeedFilter.setExpanded(!ifeedFilter.isExpanded())}">
            </p:commandLink>
          </td>
        </tr>

        <ui:fragment rendered="#{ifeedFilter.expanded}">
          <ui:repeat value="#{ifeedFilter.children}" var="child" varStatus="vs4filterLoop">
            <tr>
              <ui:fragment rendered="#{vs4filterLoop.index == 0}">
                <td rowspan="#{ifeedFilter.children.size()}"></td>
              </ui:fragment>
              <td>
                <p:commandLink styleClassFoo="sub-item ltr-flowing-item" value="#{child.name}"
                               update=":ifeed_view"
                               ajax="true" async="true"
                               title="#{child.help}"
                               actionListener="#{app.setNewFilter(child)}">
                </p:commandLink>
              </td>
            </tr>
          </ui:repeat>
        </ui:fragment>


      </ui:repeat>
    </table>
  </p:panel>



</f:view>