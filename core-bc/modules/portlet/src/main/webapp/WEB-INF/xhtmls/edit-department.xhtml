<?xml version="1.0" encoding="UTF-8"?>

<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:aui="http://liferay.com/faces/aui"
                xmlns:portlet="http://java.sun.com/portlet_2_0">

  <p:panel rendered="#{app.department != null}">
    <h:panelGrid style="border-spacing: 15px; border-collapse: separate;" columns="2" cellspacing="15" styleClass="align-top-table">
      <p:panel>
        <h4>Namn</h4>
        <h:inputText value="#{app.department.name}" stylex="width: 90%;" />
        <h4>Beskrivning</h4>
        <h:inputTextarea value="#{app.department.description}" stylex="width: 90%;" />
      </p:panel>

      <p:panel>
        <table class="rp-table" style="width: auto;">
          <thead>
          <tr>
            <th>
              Grupp
              <p:commandLink value="(LÃ¤gg till)" update=":ifeed_view"
                             styleClass=""
                             ajax="false" async="true"
                             actionListener="#{app.createGroup()}">
              </p:commandLink>
            </th>
            <th>Ta bort</th>
          </tr>
          </thead>
          <ui:repeat value="#{app.department.getVgrGroups()}" var="group" varStatus="groupsVarStatus">
            <tr>
              <td>
                <h:inputText value="#{group.name}" id="groupName#{groupsVarStatus.index}" />
              </td>
              <td>
                <p:commandLink value=" " update=":ifeed_view"
                               styleClass="link-button-trash"
                               ajax="false" async="true"
                               id="groupRemoveButton#{groupsVarStatus.index}"
                               actionListener="#{app.removeDepartmentsGroup(group)}">
                </p:commandLink>
              </td>
            </tr>
          </ui:repeat>
        </table>
      </p:panel>


      <p:panel>
        <p:commandLink update=":ifeed_view" ajax="false" async="true"
                       value="Spara"
                       styleClass="rp-link-button rp-link-button-alt"
                       style="white-space: nowrap; float:none; *display: inline; display: inline-block; zoom: 1; margin-top: 0px; background-color:green;"
                       actionListener="#{app.saveDepartment()}"/>

        <p:commandLink update=":ifeed_view" ajax="false" async="true"
                       value="Avbryt"
                       styleClass="rp-link-button rp-link-button-alt"
                       style="white-space: nowrap; float:none; *display: inline; display: inline-block; zoom: 1; margin-top: 0px; background-color:green;"
                       actionListener="#{app.cancelDepartment()}"/>
      </p:panel>

    </h:panelGrid>

  </p:panel>

</ui:composition>