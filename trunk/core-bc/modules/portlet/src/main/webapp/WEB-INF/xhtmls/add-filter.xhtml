<f:view xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui" xmlns:f="http://java.sun.com/jsf/core"
        xmlns:portlet="http://java.sun.com/portlet_2_0">



  <p:panel styleClass="filter-root" id="add-ifeed-filters" rendered="#{app.inEditMode}">
    <h3>LÃ¤gg till nytt filter #{app == null or app.getFilters() == null}</h3>

    <ui:repeat value="#{app.getFilters()}" var="ifeedFilter" varStatus="status">
      <span class="">
      <p:commandLink styleClass="main-item ltr-flowing-item" value="#{ifeedFilter.name} #{ifeedFilter.expanded ? '(-)': '(+)'}"
                     update=":ifeed_view"
                     ajax="true"
                     async="true"
                     actionListener="#{ifeedFilter.setExpanded(!ifeedFilter.isExpanded())}">
      </p:commandLink>

        <ui:repeat value="#{ifeedFilter.children}" var="child" rendered="#{ifeedFilter.expanded}">
          <p:commandLink styleClass="sub-item ltr-flowing-item" value="#{child.name}"
                         update=":ifeed_view"
                         ajax="true" async="true"
                         actionListener="#{app.setNewFilter(child)}">
          </p:commandLink>
        </ui:repeat>

      </span>
    </ui:repeat>
  </p:panel>

  <ui:include src="add-filter-dialog.xhtml"></ui:include>

</f:view>